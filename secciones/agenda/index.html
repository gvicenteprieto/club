<!-- <?php include('./events.php'); ?> -->
<!doctype html>
<html lang="es">

<head>
    <title>Agenda</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" 
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" 
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../../asset/css/style.css">

    <!-- Calendar -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <!-- Sweet Alert     -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.all.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.min.css" rel="stylesheet"> </link>
    
    <script>
        // var myModal = new bootstrap.Modal(document.getElementById('myModal'))
        // var ModalEventos = new bootstrap.Modal(document.getElementById('ModalEventos'))
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar')
            var calendar = new FullCalendar.Calendar(calendarEl, {
                locale: 'es',
                timeZone: 'local',
                initialView: 'dayGridMonth',
                height: 650,
                events: '../login/secciones/agenda/events.php',
                // headerToolbar: {
                //     left: 'prev,today,next',
                //     center: 'title',
                //     right: 'timeGridDay,timeGridWeek,dayGridMonth',
                // },
                editable: true,
                selectable: true,
                // select: async function(start, end, allDay) {
                //     const { value: formValues } = await Swal.fire({
                //         title: 'Agregar Evento',
                //         confirmButtonText: 'Submit',
                //         showCloseButton: true,
                //         showCancelButton: true,
                //         html: '<input id="swalEvTitle" class="swal2-input" placeholder="ingrese título">' +
                //             '<textarea id="swalEvDesc" class="swal2-input" placeholder="ingrese descripción"></textarea>' +
                //             '<input id="swalEvURL" class="swal2-input" placeholder="ingrese URL">',
                //         focusConfirm: false,
                //         preConfirm: () => {
                //             return [
                //                 document.getElementById('swalEvTitle').value,
                //                 document.getElementById('swalEvDesc').value,
                //                 document.getElementById('swalEvURL').value,
                //             ]
                //         }
                //     });

                //     if (formValues) {
                //         //add events
                //         fetch("eventHandler.php", {
                //                 method: "POST",
                //                 headers: { "Content-Type": "application/json" },
                //                 body: JSON.stringify({request_type: 'addEvent', start:start.start.Str, end:start.endStr, event_data: formValues }),
                //             }) 
                //             .then(response => response.json())
                //             .then(data => {
                //                 if (data.status == 1) {
                //                     Swal.fire('Evento agrgado exitosamente', '', 'success');
                //                 } else {
                //                     Swal.fire(data.error, '', 'error');
                //                 }
                //             calendar.refetchEvents();
                //             })
                //         .catch(console.error)
                //     }
                // },

                eventClick: function(info) {
                    info.jsEvent.preventDefault();
                    info.el.style.borderColor = 'red';
                    Swal.fire({
                        title: info.event.title,
                        //icon: 'info',
                        html: '<p>' + info.event.extendedProps.description + '</p><a target="_blank" href="' + info.event.url + '">Ir a la Página</a>',
                        showCloseButton: true,
                        cancelButtonText: 'Close',
                    })
                },
            })
            calendar.render()
        })
    </script>
</head>

<body>

    <div class="container">
        <div class="col-12 wrapper">
            <h4 class="text-center">Agenda de Eventos</h4>
            <div class="p-5 mt-3 mb-4 bg-light rounded-3" id='calendar'></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" 
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" 
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" 
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" 
        crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.0.3/main.min.css" rel="stylesheet">
    </link>
</body>

</html>